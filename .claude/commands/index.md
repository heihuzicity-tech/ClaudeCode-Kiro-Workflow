# Kiro SPECS Command Rules Index

## Overview
This directory contains detailed rule definitions for all Kiro SPECS commands based on CLAUDE.md. Each command has complete execution flow, constraints, and error handling protocols.

**Core Principle**: All commands must interact with users in Chinese.

## Command List

### Core Workflow Commands
- [`/kiro start`](./kiro-start.md) - Start new SPECS workflow
- [`/kiro next`](./kiro-next.md) - Execute next uncompleted task
- [`/kiro save`](./kiro-save.md) - Save progress and persist session state
- [`/kiro load`](./kiro-load.md) - Auto-load saved session state **[New]**
- [`/kiro end`](./kiro-end.md) - Complete feature development and merge

### Support Commands
- [`/kiro info`](./kiro-info.md) - Save project context information
- [`/kiro status`](./kiro-status.md) - View project status and progress **[New]**
- [`/kiro think`](./kiro-think.md) - Deep thinking and discussion mode **[New]**
- [`/kiro git`](./kiro-git.md) - Immediately commit current changes

## General Execution Protocol

### Automatic Context Loading Protocol
Every `/kiro` command must first execute:
1. Check project root - verify `.specs/` folder exists
2. Load project info - auto-read `.specs/project-info.md` if exists
3. Load current context - check active features and progress
4. Directory safety - ensure operations in correct project root

### Error Handling Protocol
- Must gracefully handle operation failures without interrupting workflow
- Must report specific error messages
- Must maintain document state consistency during errors
- Should provide recovery suggestions for each failure type
- Must not perform destructive operations if errors occur

## File Structure
```
.specs/
├── {feature_name}/
│   ├── requirements.md     # Requirements document
│   ├── design.md          # Technical design
│   ├── tasks.md           # Implementation tasks and progress tracking
│   └── summary.md         # Generated summary on completion
├── project-info.md        # Basic project information
├── session.md            # Current session state (generated by /kiro-save)
└── backups/db/           # Database backups
    └── {feature}_backup_{timestamp}.sql
```

## Security Mechanisms
- **Automatic .gitignore configuration**: `/kiro-start` and `/kiro-info` auto-configure .gitignore
- **Sensitive file protection**: project-info.md and session.md not committed by default
- **Database backup isolation**: All backup files automatically ignored

## Double Verification Mechanism (Session Management)
- **Automatic progress save**: `/kiro-next` auto-updates session.md when completing tasks (progress only)
- **Complete state save**: `/kiro-save` saves complete session state (overwrites entire file)
- **Timestamp verification**: `/kiro-load` detects timestamp consistency between session.md and tasks.md
- **Conflict handling**: Provides options when outdated session found: use old session / scan current files / cancel
- **Prevent progress loss**: Task progress automatically recorded even if manual save forgotten

## Version Information
- Based on CLAUDE.md version: 1.0.3
- Last updated: 2025-08-28
- New features: Session persistence, auto-load, security configuration, file archiving