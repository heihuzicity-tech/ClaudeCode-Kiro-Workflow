# Kiro SPECS 命令规则文档

## 文档状态
✅ **完成** - 所有命令规则文件已创建并与 .claude/commands 目录完全同步

## 文档结构

### 核心命令文件
| 文件名 | 描述 | CLAUDE.md 同步状态 |
|--------|------|------------------|
| `kiro-start.md` | 启动新 SPECS 工作流 | ✅ 完全同步 |
| `kiro-next.md` | 执行下一个未完成任务 | ✅ 完全同步 |
| `kiro-save.md` | 保存进度并生成会话提示 | ✅ 完全同步 |
| `kiro-end.md` | 完成功能并合并到主分支 | ✅ 完全同步 |
| `kiro-info.md` | 保存项目上下文信息 | ✅ 完全同步 |
| `kiro-git.md` | 立即提交当前更改 | ✅ 完全同步 |
| `kiro-change.md` | 返回规划处理需求变更 | ✅ 完全同步 |

### 辅助文件
| 文件名 | 描述 |
|--------|------|
| `index.md` | 命令索引和通用协议 |
| `README.md` | 文档状态和概述（本文件） |

## 同步验证清单

### ✅ 核心规则完全匹配
- [x] 所有命令前缀使用 `/kiro-` 格式（与 Claude Code 文件名识别一致）
- [x] 中文交互要求在每个命令中明确说明
- [x] 自动上下文加载协议在每个命令中一致
- [x] 错误处理协议与 CLAUDE.md 保持一致

### ✅ 执行流程完全匹配
- [x] `/kiro start` 的安全与设置协议（8个必须步骤）
- [x] `/kiro next` 的任务执行约束和推荐逻辑
- [x] `/kiro save` 的会话恢复机制和提示格式
- [x] `/kiro end` 的完成流程（4个必须阶段）
- [x] `/kiro git` 的提交规则（不合并约束）
- [x] `/kiro info` 的项目信息保存和自动加载
- [x] `/kiro change` 的规划返回和文档重生成

### ✅ 约束条件完全匹配
- [x] 强制用户批准门检查
- [x] 自动任务管理（一次一个任务）
- [x] 分离工作流与规划原则
- [x] Git 操作安全约束
- [x] 文档状态一致性维护

### ✅ 模板和格式完全匹配
- [x] 需求文档模板（User Story + EARS 格式）
- [x] 设计文档模板（6个必须部分）
- [x] 任务文档模板（进度跟踪格式）
- [x] 会话恢复提示格式（精确匹配）
- [x] 提交信息格式标准

## 重构质量保证

### 代码简化原则
- **认知负载最小化**: 每个命令文件结构清晰，避免复杂嵌套
- **重复消除**: 通用协议在 `index.md` 中统一定义，各命令文件引用
- **模式一致性**: 所有命令文件使用相同的结构模式（命令描述→语法→协议→流程→错误处理→成功标准）

### 技术债务管理
- **文档同步债务**: 建立了与 CLAUDE.md 的完全同步，避免文档不一致
- **维护性提升**: 每个命令独立文档，便于单独维护和更新
- **版本追踪**: 明确标注基于 CLAUDE.md 版本 1.0.1

### SOLID 原则应用
- **单一职责**: 每个命令文件只负责一个命令的规则定义
- **开闭原则**: 命令规则可扩展但不修改核心协议
- **接口分离**: 每个命令有独立的接口定义，不相互依赖
- **依赖倒置**: 所有命令依赖于 CLAUDE.md 中的抽象规则，而不是具体实现

## 使用指南

### 开发者使用
1. 查看 `index.md` 获取命令概览
2. 查看具体命令文件获取详细规则
3. 参考 CLAUDE.md 了解完整工作流程

### 维护指南
1. 任何对 CLAUDE.md 的修改都必须同步到对应的命令文件
2. 保持所有命令文件的格式一致性
3. 更新版本信息当 CLAUDE.md 版本变更时

## 版本信息
- **创建时间**: 2025-01-31
- **基于版本**: CLAUDE.md v1.0.1
- **文档状态**: 完成并验证
- **同步状态**: 100% 同步

---

**注意**: 此文档集合是对 CLAUDE.md 的重构和结构化，未添加任何 CLAUDE.md 中不存在的内容，确保完全的规则一致性。